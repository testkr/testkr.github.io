<!DOCTYPE html>
<html lang="en" ng-app="optc">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=600, height=650, initial-scale=0.6, user-scalable=no, user-scalable=0">
        <meta name="description" itemprop="description" content="One Piece Treasure Cruise Drop Table">
        <meta name="author" content="Zeenigami and Mondfischer">
        <meta name="keywords" content="OPTC, One Piece Treasure Cruise, Database, Calculator, Guides, Help, Walkthroughs, Tutorials">

        <title>[침착맨]원피스 트레저 크루즈</title>

        <link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" type="text/css" href="../common/libs/css/animate.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/ngDialog.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/ngDialog-theme-default.min.css" />

        <link rel="stylesheet" type="text/css" href="../common/css/links.css" />

        <link rel="stylesheet" type="text/css" href="index.css" />

        <script src="../common/libs/js/es5-shim.min.js"></script>
        <script src="../common/libs/js/jquery.min.js"></script>
        <script src="../common/libs/js/angular.min.js"></script>
        <script src="../common/libs/js/bootstrap.min.js"></script>
        <script src="../common/libs/js/ui-bootstrap-tpls.min.js"></script>
        <script src="../common/libs/js/angular-sanitize.min.js"></script>
        <script src="../common/libs/js/ngDialog.min.js"></script>

        <script src="../common/data/units.js"></script>
        <script src="../common/data/drops.js"></script>
        <script src="../common/data/cooldowns.js"></script>

        <script src="../common/js/utils.js"></script>

        <script src="index.js"></script>

        <script src="../common/js/directives.js"></script>
        <!--<script src="../common/js/error.js"></script>-->
        <script src="../common/js/dismissal.js"></script>

        <script src="../characters/js/utils.js"></script>
        
        <script src="../common/libs/js/moment.js"></script>
        <script src="../common/libs/js/moment-timezone.js"></script>

    </head>

    <body ng-controller="MainCtrl" onload="updateTimes()">

        <script type="text/ng-template" id="type.html">
            <div ng-repeat="island in data[type]" ng-if="island.name != 'Oars Special'" class="island collapsed"
                collapsable target="island.html" island="island" data="data"
                ng-show="(!onlyGlobal || island.global) && (!query || query.test(island.name))">
                <h3>
                    <div decorate-slot uid="island.thumb" class="slot small"></div>
                    <i class="fa fa-chevron-right"></i>
                    <i class="fa fa-chevron-down"></i>
                    <span>{{island.name}}</span>
                    <i class="fa fa-globe" ng-show="island.global" title="Available On Global"></i>
                    <i class="fa fa-star" ng-show="island.challenge" title="Challenge Available"></i>
                    <bonus-list ng-if="type == '스토리'" y="$index"></bonus-list>\
                </h3>
            </div>
        </script>

          <script type="text/ng-template" id="island.html">
            <table class="table table-striped">
                <tbody>
                    <tr ng-if="island.completion" hide-when-empty>
                        <td>완료 보상</td>
                        <td colspan="2">{{island.completion}} </td>
                    </tr>                    
                     <tr ng-if="island.inven" hide-when-empty>
                        <td>원트크 인벤</td>
                        <td colspan="2">
                            <a href = "http://www.inven.co.kr/board/mini/4740/{{island.inven}}" target="_blank">인벤 공략보기</a>
                        </td>
                    </tr>
                    <tr ng-if="island.inven2" hide-when-empty>
                        <td>원트크 인벤</td>
                        <td colspan="2">
                            <a href = "http://www.inven.co.kr/webzine/news/?news={{island.inven2}}" target="_blank">인벤 공략보기</a>
                        </td>
                    </tr>
                     <tr ng-if="island.torekuru" hide-when-empty>
                        <td>원트크 카페</td>
                        <td colspan="2">
                            <a href = "http://cafe.naver.com/torekuru/{{island.torekuru}}" target="_blank">카페 공략보기</a>
                        </td>
                    </tr>
                    <tr ng-if="island.gamewith" hide-when-empty>
                        <td>Gamewith</td>
                        <td colspan="2">
                            <a href = "https://translate.google.com/translate?sl=auto&tl=ko&js=y&prev=_t&hl=ko&ie=UTF-8&u=https://トレクル.gamewith.jp/article/show/{{island.gamewith}}" target="_blank">Gamewith Page (한글번역)</a>
                        </td>
                    </tr>
                    <tr ng-if="island.teamDatabase" hide-when-empty>
                        <td>팀 데이터베이스</td>
                        <td colspan="2">
                            <a href = "https://translate.google.com/translate?sl=auto&tl=ko&js=y&prev=_t&hl=ko&ie=UTF-8&u=http://slefty.herokuapp.com/{{island.teamDatabase}}" target="_blank">팀 데이터베이스 (한글번역)</a>
                        </td>
                    </tr>
					 <tr ng-if="island.slefty" hide-when-empty>
                        <td>Slefty's Team Database</td>
                        <td colspan="2">
                            <a href = "http://slefty.herokuapp.com/{{island.slefty}}" target="_blank">Slefty's Team Database Page</a>
                        </td>
                    </tr>
					 <tr ng-if="island.nakama" hide-when-empty>
                        <td>Nakama Network</td>
                        <td colspan="2">
                            <a href = "https://www.nakama.network/stages/{{island.nakama}}/details" target="_blank">Nakama Network Team Database</a>
                        </td>
                    </tr>
                    <tr ng-if="island.condition" hide-when-empty>
                        <td>맵 상태</td>
                        <td colspan="2">{{island.condition}} </td>
                    </tr>
                    <tr ng-if="island.challenge">
                        <td>도전(미션)</td>
                        <td colspan="2">{{island.challenge}} </td>
                    </tr>
                    <tr ng-repeat="challenge in island.challengeData">
                        <td></td>
                        <td>{{challenge[0]}}</td>
                        <td>{{challenge[1]}}</td>
                    </tr>
                </tbody>
                <tbody>
                    <tr ng-repeat="(stage,data) in island"
                        ng-if="stage != 'thumb' && stage != 'day' && stage != 'name' && stage != 'shortName' && stage != 'global' && stage != 'condition' && stage != 'challenge' && stage != 'completion' && stage != 'challengeData' && stage != 'showManual' && stage != 'gamewith' && stage != 'teamDatabase' && stage != 'torekuru' && stage != 'inven' && stage != 'inven2' && stage != 'slefty' && stage != 'nakama'">
                        <td>
                             {{type == '스토리'&& stage!='Completion Units' ? '스테이지 ' + stage : (stage.length < 2 ? '모든맵' : stage)}}
                        </td>
                        <td hide-when-empty colspan="2">
                            <a ng-repeat="uid in data | smartSort:'false'" ng-if="uid > 0 && !hiddenUnits[uid]"
                                decorate-slot uid="uid" class="slot small" 
                                href="../characters/#/view/{{uid}}" target="_blank"
                                uib-tooltip="{{getTooltipText(uid)}}"
                                tooltip-placement="bottom" tooltip-trigger="mouseenter"
                                tooltip-enable="{{isTooltipEnabled(uid)}}" tooltip-append-to-body="true"></a>
                            <a ng-repeat="uid in data | smartSort:'false'" ng-if="uid.includes('skull')"
                                decorate-slot uid="uid" class="slot small" 
                                uib-tooltip="{{getTooltipText(uid)}}"
                                tooltip-placement="bottom" tooltip-trigger="mouseenter"
                                tooltip-enable="{{isTooltipEnabled(uid)}}" tooltip-append-to-body="true"></a>
                             <h4 ng-if="type == '스페셜 던전' || island.showManual">스킬북:</h4>
                            <a ng-repeat="uid in data | smartSort:'true'" ng-if="uid < 0"
                                decorate-slot uid="-uid" class="slot small"
                                href="../characters/#/view/{{-uid}}" target="_blank"
                                uib-tooltip="{{getTooltipText(-uid)}}"
                                tooltip-placement="bottom" tooltip-trigger="mouseenter"
                                tooltip-enable="{{isTooltipEnabled(-uid)}}" tooltip-append-to-body="true"></a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </script>

        <div id="main" ng-cloak>

            <h1 class="page-header">
                드롭 테이블
                <label><input type="checkbox" ng-model="onlyGlobal" ng-change="changeFilters()">글로벌 캐릭만 보기</label>
                <label><input type="checkbox" ng-model="noFodder" ng-change="changeFilters()">잔챙이 안보기</label>
                <label><input type="checkbox" ng-model="noEvolverBooster" ng-change="changeFilters()">진화/강화재료 안보기</label>
                <label><input type="checkbox" ng-model="sortByType" ng-change="changeSorting()">타입별 정렬</label>
                <input class="pull-right" type="text" placeholder="검색" auto-focus
                    ng-model="queryFilter" ng-model-options="{ debounce: 500 }" ng-change="changeQueryFilter()" id="search">
            </h1>

            <div ng-repeat="type in [ '스토리', '재료', '스페셜 던전', '강림','콜로세움', '트레져 맵', '이벤트 던전', '특훈의 숲' ]"
                class="type collapsed" collapsable hidden-units="hiddenUnits" only-global="onlyGlobal"
                target="type.html" type="type" data="data" query="query">
                <h2>
                    <i class="fa fa-chevron-right"></i>
                    <i class="fa fa-chevron-down"></i>
                    <span>{{type}}</span>
                </h2> 
            </div>

            <h1 class="page-header">보너스</h1>
            
            <div>
                <p id="times"></p>
                <p id="timesNote"></p>
            </div>
            
            <table class="table table-striped" id="bonus-table" add-bonuses>
                <thead>
                    <tr>
                        <th>이름</th>
                        <th>월</th>
                        <th>화</th>
                        <th>수</th>
                        <th>목</th>
                        <th>금</th>
                        <th>토</th>
                        <th>일</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="(n,island) in data['스토리']">
                        <td>{{island.shortName ? island.shortName : island.name}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

        </div>

        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })
        (window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-80600302-1', 'auto');
        ga('send', 'pageview', '/drops');
        </script>

        <error-report></error-report>
        <link-button exclude="drops"></link-button>

    </body>

</html>
